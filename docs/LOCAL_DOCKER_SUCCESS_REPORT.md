# æœ¬åœ° Docker éƒ¨ç½²æˆåŠŸæŠ¥å‘Š

## âœ… éƒ¨ç½²æˆåŠŸï¼

**æ—¶é—´**: 2026-02-12 20:45
**ç¯å¢ƒ**: Windows 11 + Docker 29.2.0

---

## è¿è¡Œä¸­çš„æœåŠ¡

| æœåŠ¡ | çŠ¶æ€ | ç«¯å£ | è®¿é—®åœ°å€ | ç”¨é€” |
|------|------|------|----------|------|
| **Grafana** | âœ… è¿è¡Œä¸­ | 3000 | http://localhost:3000 | å¯è§†åŒ–ä»ªè¡¨æ¿ |
| **Prometheus** | âœ… è¿è¡Œä¸­ | 9090 | http://localhost:9090 | ç›‘æ§æŒ‡æ ‡æ”¶é›† |
| **TimescaleDB** | âœ… å¥åº· | 5432 | localhost:5432 | æ—¶åºæ•°æ®åº“ |

---

## ç™»å½•ä¿¡æ¯

### Grafana
```
URL: http://localhost:3000
ç”¨æˆ·å: admin
å¯†ç : admin123
```

### TimescaleDB
```
ä¸»æœº: localhost
ç«¯å£: 5432
æ•°æ®åº“: ttquant_test
ç”¨æˆ·å: ttquant
å¯†ç : ttquant123
```

**è¿æ¥å‘½ä»¤**:
```bash
docker exec -it ttquant-timescaledb psql -U ttquant -d ttquant_test
```

---

## ä½ ç°åœ¨å¯ä»¥åšä»€ä¹ˆ

### 1. è®¿é—® Grafana ä»ªè¡¨æ¿
```
æ‰“å¼€æµè§ˆå™¨: http://localhost:3000
ç™»å½•åå¯ä»¥:
- æ·»åŠ æ•°æ®æºï¼ˆPrometheusï¼‰
- åˆ›å»ºä»ªè¡¨æ¿
- é…ç½®å‘Šè­¦
```

### 2. æŸ¥çœ‹ Prometheus ç›‘æ§
```
æ‰“å¼€æµè§ˆå™¨: http://localhost:9090
å¯ä»¥:
- æŸ¥è¯¢æŒ‡æ ‡
- æŸ¥çœ‹ç›®æ ‡çŠ¶æ€
- æµ‹è¯• PromQL æŸ¥è¯¢
```

### 3. è¿æ¥æ•°æ®åº“
```bash
# è¿›å…¥æ•°æ®åº“
docker exec -it ttquant-timescaledb psql -U ttquant -d ttquant_test

# æŸ¥çœ‹ç‰ˆæœ¬
SELECT version();

# æŸ¥çœ‹ TimescaleDB æ‰©å±•
\dx

# é€€å‡º
\q
```

### 4. æœ¬åœ°è¿è¡Œ Python ä»£ç 
```bash
cd python

# è¿è¡Œå¿«é€Ÿæ¼”ç¤º
python example_quick_demo.py

# ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
python data/generate_simulated_data.py

# è®­ç»ƒæ¨¡å‹
python train_ml_with_real_data.py
```

### 5. æŸ¥çœ‹æœåŠ¡æ—¥å¿—
```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
docker-compose -f docker-compose.test.yml logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡
docker-compose -f docker-compose.test.yml logs -f grafana
docker-compose -f docker-compose.test.yml logs -f prometheus
docker-compose -f docker-compose.test.yml logs -f timescaledb
```

---

## å¸¸ç”¨å‘½ä»¤

### æœåŠ¡ç®¡ç†
```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose -f docker-compose.test.yml down

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose -f docker-compose.test.yml up -d

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.test.yml restart

# æŸ¥çœ‹çŠ¶æ€
docker-compose -f docker-compose.test.yml ps
```

### æ•°æ®ç®¡ç†
```bash
# å¤‡ä»½æ•°æ®åº“
docker exec ttquant-timescaledb pg_dump -U ttquant ttquant_test > backup.sql

# æ¢å¤æ•°æ®åº“
docker exec -i ttquant-timescaledb psql -U ttquant -d ttquant_test < backup.sql

# æ¸…ç†æ‰€æœ‰æ•°æ®ï¼ˆè°¨æ…ï¼ï¼‰
docker-compose -f docker-compose.test.yml down -v
```

---

## é—®é¢˜è¯´æ˜

### Strategy Engine å’Œ Risk Monitor æœªå¯åŠ¨

**åŸå› **: è¿™ä¸¤ä¸ªæœåŠ¡éœ€è¦ `strategy_engine.py` å’Œ `risk_monitor.py` æ–‡ä»¶ï¼Œç›®å‰é¡¹ç›®ä¸­è¿˜æ²¡æœ‰è¿™äº›æ–‡ä»¶ã€‚

**å½±å“**: ä¸å½±å“åŸºç¡€è®¾æ–½æµ‹è¯•ï¼Œå¯ä»¥ï¼š
- âœ… ä½¿ç”¨ Grafana å’Œ Prometheus
- âœ… ä½¿ç”¨ TimescaleDB
- âœ… æœ¬åœ°è¿è¡Œ Python ä»£ç 

**è§£å†³æ–¹æ¡ˆ**ï¼ˆå¯é€‰ï¼‰:
1. åˆ›å»ºè¿™äº›æ–‡ä»¶åé‡æ–°å¯åŠ¨
2. æˆ–è€…ç›´æ¥åœ¨æœ¬åœ°è¿è¡Œ Python ä»£ç ï¼ˆä¸ç”¨ Dockerï¼‰

---

## ç³»ç»Ÿæ¶æ„ï¼ˆå½“å‰çŠ¶æ€ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      TTQuant æœ¬åœ° Docker ç¯å¢ƒ            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  âœ… åŸºç¡€è®¾æ–½æœåŠ¡ï¼ˆè¿è¡Œä¸­ï¼‰                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Grafana  â”‚ â”‚Prometheusâ”‚ â”‚TimescaleDBâ”‚
â”‚  â”‚  :3000   â”‚ â”‚  :9090   â”‚ â”‚  :5432  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚             â”‚            â”‚      â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                          â”‚
â”‚  ğŸ’» Python åº”ç”¨ï¼ˆæœ¬åœ°è¿è¡Œï¼‰               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢ example_quick_demo.py          â”‚  â”‚
â”‚  â”‚ â€¢ train_ml_with_real_data.py     â”‚  â”‚
â”‚  â”‚ â€¢ data/generate_simulated_data.pyâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‹ä¸€æ­¥å»ºè®®

### ç«‹å³å¯åš

1. **æ¢ç´¢ Grafana**
   - æ‰“å¼€ http://localhost:3000
   - æ·»åŠ  Prometheus æ•°æ®æº
   - åˆ›å»ºç¬¬ä¸€ä¸ªä»ªè¡¨æ¿

2. **æµ‹è¯• Prometheus**
   - æ‰“å¼€ http://localhost:9090
   - å°è¯•æŸ¥è¯¢: `up`
   - æŸ¥çœ‹ Targets é¡µé¢

3. **è¿æ¥æ•°æ®åº“**
   - ä½¿ç”¨ DBeaver æˆ– pgAdmin
   - æˆ–å‘½ä»¤è¡Œ: `docker exec -it ttquant-timescaledb psql -U ttquant -d ttquant_test`

4. **è¿è¡Œ Python æ¼”ç¤º**
   ```bash
   cd python
   python example_quick_demo.py
   ```

### åç»­å¼€å‘

1. åˆ›å»º `strategy_engine.py` å’Œ `risk_monitor.py`
2. å®ç°å®Œæ•´çš„ç­–ç•¥å¼•æ“
3. æ·»åŠ æ›´å¤šç›‘æ§æŒ‡æ ‡
4. é…ç½® Grafana ä»ªè¡¨æ¿

---

## æˆåŠŸæŒ‡æ ‡

- âœ… Docker é•œåƒæ„å»ºæˆåŠŸï¼ˆ2/2ï¼‰
- âœ… åŸºç¡€è®¾æ–½æœåŠ¡è¿è¡Œï¼ˆ3/3ï¼‰
- âœ… Grafana å¥åº·æ£€æŸ¥é€šè¿‡
- âœ… Prometheus å¥åº·æ£€æŸ¥é€šè¿‡
- âœ… TimescaleDB å¥åº·æ£€æŸ¥é€šè¿‡
- âœ… æ‰€æœ‰ç«¯å£å¯è®¿é—®

**æ€»ä½“å®Œæˆåº¦**: 100% (åŸºç¡€è®¾æ–½)

---

## æ€»ç»“

### âœ… æˆåŠŸå®Œæˆ
- Docker ç¯å¢ƒæ­å»º
- 3ä¸ªæ ¸å¿ƒæœåŠ¡è¿è¡Œ
- æ‰€æœ‰å¥åº·æ£€æŸ¥é€šè¿‡
- å¯ä»¥å¼€å§‹å¼€å‘å’Œæµ‹è¯•

### ğŸ“Š ç³»ç»ŸçŠ¶æ€
- Grafana v12.3.2 è¿è¡Œä¸­
- Prometheus è¿è¡Œä¸­
- TimescaleDB (PostgreSQL 14) è¿è¡Œä¸­

### ğŸ¯ å¯ä»¥å¼€å§‹
- å¯è§†åŒ–ç›‘æ§å¼€å‘
- æ•°æ®åº“è®¾è®¡å’Œæµ‹è¯•
- Python åº”ç”¨å¼€å‘
- ç­–ç•¥å›æµ‹

---

**æŠ¥å‘Šæ—¶é—´**: 2026-02-12 20:45
**çŠ¶æ€**: âœ… éƒ¨ç½²æˆåŠŸ
**ç¯å¢ƒ**: æœ¬åœ° Docker
**ä¸‹ä¸€æ­¥**: å¼€å§‹ä½¿ç”¨ Grafana å’Œ Prometheus
